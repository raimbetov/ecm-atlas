<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ouni_2022 - ECM-Atlas Dataset</title>
    <link rel="stylesheet" href="../static/styles.css">
    <style>
        body {
            background-color: #f5f7fa;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header-bar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .header-bar h1 {
            margin: 0 0 10px 0;
            font-size: 2em;
        }
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .section h2 {
            color: #667eea;
            margin-top: 0;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .badge {
            display: inline-block;
            padding: 5px 15px;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 5px;
        }
        .back-button {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 20px;
            transition: background 0.3s;
        }
        .back-button:hover {
            background: #764ba2;
        }
        .publication-info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
        .publication-info h3 {
            margin-top: 0;
            color: #1565c0;
        }
        pre {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../dashboard.html" class="back-button">‚Üê Back to Dashboard</a>

        <div class="header-bar">
            <h1>üìä Ouni_2022</h1>
            <p style="margin: 0; opacity: 0.9; font-size: 1.1em;">
                Aging-related changes in pancreatic islet proteome
            </p>
        </div>

        <!-- Publication Information -->
        <div class="publication-info">
            <h3>üìÑ Original Publication</h3>
            <p><strong>Authors:</strong> Ouni et al.</p>
            <p><strong>Journal:</strong> Molecular Metabolism (2022)</p>
            
            
        </div>

        <!-- Dataset Statistics -->
        <h2>üìà Dataset Statistics</h2>
        <div class="stat-grid">
            <div class="stat-card">
                <div class="stat-value">98</div>
                <div class="stat-label">Total Measurements</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">98</div>
                <div class="stat-label">Unique Proteins</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">0</div>
                <div class="stat-label">ECM Proteins</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">Homo sapiens</div>
                <div class="stat-label">Species</div>
            </div>
            
        </div>

        <!-- Tissue & Compartments -->
        <div class="section">
            <h2>üß¨ Tissue Information</h2>
            <div>
                <strong>Tissues:</strong>
                <span class="badge">Ovary_Cortex</span>
            </div>
            <div style="margin-top: 10px;">
                <strong>Compartments:</strong>
                <span class="badge">Cortex</span>
            </div>
        </div>

        <!-- Data Processing -->
        <div class="section">
            <h2>‚öôÔ∏è Data Processing</h2>
            <h3>Pipeline Steps</h3>
            <ol>
                <li><strong>Raw Data Extraction:</strong> Original proteomic data extracted from supplementary materials</li>
                <li><strong>Normalization:</strong> Converted to long format, filtered for ECM proteins (Match_Confidence > 0)</li>
                <li><strong>Wide Format Transformation:</strong> Pivoted to sample √ó protein abundance matrix</li>
                <li><strong>Merge to Unified Database:</strong> Added to <code>merged_ecm_aging_zscore.csv</code></li>
                <li><strong>Z-score Calculation:</strong> Calculated per-compartment z-scores for cross-study comparison</li>
            </ol>

            <h3>Key Processing Parameters</h3>
            <ul>
                <li><strong>Study ID:</strong> <code>Ouni_2022</code></li>
                <li><strong>Missing Values:</strong> Preserved (NaN = protein not detected)</li>
                <li><strong>Zero Values:</strong> Included (0.0 = detected but absent)</li>
                <li><strong>Normalization:</strong> Within-study z-scores per compartment</li>
            </ul>
        </div>

        <!-- README Content (if available) -->
        <div class="section">
            <h2>üìù Processing Notes</h2>
            <div style="background: white; padding: 20px; border-radius: 5px;">
                # Ouni et al. 2022 - TMT Processing

## Study Information
- **Title:** Proteome-wide and matrisome-specific atlas of the human ovary
- **PMID:** 35341935
- **Tissue:** Human ovarian cortex
- **Species:** Homo sapiens
- **Method:** DC-MaP + TMTpro 16-plex LC-MS/MS

## Age Groups
- **Young:** Reproductive age (26¬±5 years, n=5)
- **Old:** Menopausal (59¬±8 years, n=5)
- **Age gap:** 33 years

## Processing Summary
This dataset was processed using the **TMT adapter pipeline** (lightweight transformation):
- ‚úÖ Pre-normalized data (quantile normalization by authors)
- ‚úÖ ECM classification pre-annotated (Category/Division columns)
- ‚úÖ Simple column mapping (no complex parsing required)
- ‚úÖ Empty rows filtered (4 blank rows at end of Excel table)
- ‚úÖ Processing time: ~15 minutes

## Files

### Input
- `../../data_raw/Ouni et al. - 2022/Supp Table 3.xlsx`
  - Sheet: `Matrisome Proteins` (102 rows √ó 33 columns)
  - Contains quantile-normalized TMT reporter intensities
  - Note: 4 empty rows at end filtered out during processing

### Output
- `Ouni_2022_wide_format.csv` - **98 ECM proteins** in unified schema
  - 15 columns: Protein_ID, Gene_Symbol, Tissue, Abundance_Young, Abundance_Old, etc.
  - Ready for Phase 2 merge and Phase 3 z-score normalization

### Scripts
- `tmt_adapter_ouni2022.py` - TMT adapter script
  - Loads TMT data
  - Calculates mean abundances per age group
  - Maps to unified schema
  - Exports wide-format CSV

### Documentation
- `00_TASK_OUNI_2022_TMT_PROCESSING.md` - Complete task specification
- `README.md` - This file

### Metadata
- `zscore_metadata_Ouni_2022.json` - Z-score normalization metadata
  - Normalization parameters (mean, std)
  - Validation results
  - Outlier statistics
  - Generated: 2025-10-14

## Data Quality
- **ECM proteins:** 98 (all pre-annotated by authors)
- **Missing values:** Young=0, Old=0 (100% data completeness)
- **Matrisome categories:**
  - ECM Glycoproteins: 27
  - ECM Regulators: 22
  - ECM-affiliated Proteins: 16
  - Collagens: 16
  - Secreted Factors: 9
  - Proteoglycans: 8
- **Match confidence:** 100% (ECM classification by authors)

## Processing Pipeline (Completed)

### Phase 1: TMT Adapter ‚úÖ
```bash
python tmt_adapter_ouni2022.py
```
- Processed 98 ECM proteins
- Created `Ouni_2022_wide_format.csv`

### Phase 2: Merge to Unified Database ‚úÖ
```bash
cd ../../
python 11_subagent_for_LFQ_ingestion/merge_to_unified.py \
    05_papers_to_csv/08_Ouni_2022_paper_to_csv/Ouni_2022_wide_format.csv
```
- Merged to `08_merged_ecm_dataset/merged_ecm_aging_zscore.csv`
- Added Organ, Compartment, Dataset_Name metadata columns

### Phase 3: Calculate Z-scores ‚úÖ
```bash
python 11_subagent_for_LFQ_ingestion/universal_zscore_function.py \
    'Ouni_2022' 'Tissue'
```
- Grouped by: Tissue (Ovary_Cortex)
- No log-transformation needed (skewness < 1)
- Validation passed: Œº=0, œÉ=1
- Outliers: Young=2 (2.0%), Old=1 (1.0%)
- Results saved to `zscore_metadata_Ouni_2022.json`

## Validation
All 13 success criteria met:
- ‚úÖ File loaded successfully
- ‚úÖ Row count correct (102 proteins)
- ‚úÖ No null critical fields
- ‚úÖ Age mapping correct
- ‚úÖ Schema compliance (15 columns)
- ‚úÖ ECM classification preserved
- ‚úÖ Match confidence 100%
- ‚úÖ Species consistency
- ‚úÖ Abundance validation passed
- ‚úÖ Missing values acceptable
- ‚úÖ Wide-format CSV created
- ‚úÖ Adapter script documented
- ‚úÖ Task documentation complete

## Technical Notes
- TMT data requires different processing than LFQ datasets
- See `11_subagent_for_LFQ_ingestion/03_TMT_vs_LFQ_PROCESSING_GUIDE.md` for methodology differences
- This dataset represents human reproductive aging in ECM-rich ovarian tissue

---

**Created:** 2025-10-14
**Updated:** 2025-10-14
**Status:** ‚úÖ Complete - All Phases Done (Phase 1-3)
**Dashboard:** Available at http://localhost:8083/dashboard.html

            </div>
        </div>

        <!-- Data Access -->
        <div class="section">
            <h2>üíæ Data Access</h2>
            <p>This dataset is included in the unified ECM-Atlas database. You can access it through:</p>
            <ul>
                <li><strong>Dashboard:</strong> Select "Ouni_2022" from the Individual Dataset Analysis tab</li>
                <li><strong>CSV File:</strong> <code>08_merged_ecm_dataset/merged_ecm_aging_zscore.csv</code></li>
                <li><strong>Filter:</strong> <code>df[df['Study_ID'] == 'Ouni_2022']</code></li>
            </ul>

            <h3>Quick Start (Python)</h3>
            <pre>import pandas as pd

# Load unified database
df = pd.read_csv('merged_ecm_aging_zscore.csv')

# Filter for this study
study_df = df[df['Study_ID'] == 'Ouni_2022']

# View ECM proteins only
ecm_df = study_df[study_df['ECM_Class'].notna()]

print(f"Total proteins: {len(study_df['Protein_ID'].unique())}")
print(f"ECM proteins: {len(ecm_df['Protein_ID'].unique())}")</pre>
        </div>

        <!-- Metadata -->
        <div class="section">
            <h2>üîß Metadata</h2>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <pre style="background: #263238; color: #aed581; padding: 15px; border-radius: 5px; overflow-x: auto; margin: 0;">{}</pre>
            </div>
        </div>

        <!-- Footer -->
        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e0e0e0; text-align: center; color: #666;">
            <p>
                <strong>Generated:</strong> 2025-10-18 &nbsp;|&nbsp;
                <strong>ECM-Atlas Version:</strong> 2.0
            </p>
            <p style="margin-top: 15px;">
                <a href="../dashboard.html" class="back-button">‚Üê Back to Dashboard</a>
            </p>
        </div>
    </div>
</body>
</html>
