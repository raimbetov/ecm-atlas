        <section class="section" id="mission">
            <h2><span class="science-icon" data-number="1"></span>Mission</h2>
            <p>ECM-Atlas is a unified database aggregating 13+ proteomic studies to track age-related changes in the extracellular matrix (ECM) across tissues and organisms. Our goal is to identify universal aging biomarkers and therapeutic targets by analyzing cross-tissue ECM signatures.</p>
        </section>

        <section class="section" id="why-ecm">
            <h2><span class="science-icon" data-number="2"></span>Why ECM Matters for Aging</h2>
            <p>The extracellular matrix (ECM) is a complex biological scaffold that provides structural foundation to all tissues and organs. Beyond anchoring cells, the ECM creates a mechanical and biochemical environment that directs cellular functions through various stimuli, influencing gene expression and tissue homeostasis.</p>
        </section>

        <section class="section" id="matrisome">
            <h2><span class="science-icon" data-number="3"></span>The Matrisome and Temporal Dynamics</h2>
            <p>The matrisome comprises all proteins that constitute the ECMâ€”1,027 genes in humans and 1,110 genes in mice. Each tissue contains over 150 ECM and ECM-associated proteins with characteristic compositional differences. As a dynamic structure, the ECM composition changes as a function of age.</p>
            <table class="matrisome-table">
                <tr class="category-challenge">
                    <td><strong>Challenge:</strong></td>
                    <td>Limited knowledge of temporal matrisome changes across life stages</td>
                </tr>
                <tr class="category-gap">
                    <td><strong>Gap:</strong></td>
                    <td>Proteomic data better reflects ECM reality than transcriptomic signatures</td>
                </tr>
                <tr class="category-opportunity">
                    <td><strong>Opportunity:</strong></td>
                    <td>Recent proteomic studies (2017-2024) provide time-resolved ECM data</td>
                </tr>
                <tr class="category-solution">
                    <td><strong>Solution:</strong></td>
                    <td>Integrate public datasets to understand ECM aging signatures and identify intervention targets</td>
                </tr>
            </table>
        </section>

        <section class="section" id="pipeline">
            <h2><span class="science-icon" data-number="4"></span>Data Processing Pipeline</h2>
            <p>Raw proteomic datasets flow through an autonomous normalization pipeline into a unified database with standardized z-scores for cross-study comparison.</p>
            <figure>
                <div class="mermaid">
graph LR
    A[Raw Excel/TSV Files] --> B[Autonomous Agent<br/>Normalization]
    B --> C[Long Format]
    C --> D[ECM Filtering<br/>Match_Confidence > 0]
    D --> E[Wide Format CSV]
    E --> F[Merge to Unified DB]
    F --> G[Z-score Calculation<br/>Per Compartment]
    G --> H[Dashboard Visualization]

    style A fill:#ffebee
    style H fill:#e8f5e9
    style G fill:#fff3e0
    style F fill:#e3f2fd
    </div>
                <figcaption>Data Processing Pipeline</figcaption>
            </figure>
        </section>

        <section class="section" id="structure">
            <h2><span class="science-icon" data-number="5"></span>Database Structure</h2>
            <div class="structure-grid">
                <div class="structure-block">
                    <h3>Overview <code>merged_ecm_aging_zscore.csv</code></h3>
                    <ul class="features-list">
                        <li>14 datasets from 2017-2023</li>
                        <li>3,715 measurements (1,106 unique ECM proteins)</li>
                        <li><strong>Species:</strong> Human (Homo sapiens), Mouse (Mus musculus)</li>
                    </ul>
                    <div class="structure-item">
                        <div class="structure-label">Key columns:</div>
                        <div class="structure-data">
                            Protein_ID, Gene_Symbol, Tissue, Compartment,<br>
                            Age, Abundance, Z_score, Study_ID
                        </div>
                    </div>
                    <div class="structure-item">
                        <div class="structure-label">Tissues:</div>
                        <div class="structure-data">Kidney, Lung, Heart, Skin dermis, Intervertebral disc, Brain, Skeletal muscle, Ovary</div>
                    </div>
                </div>
                <div class="structure-block">
                    <h3>Features</h3>
                    <ul class="features-list">
                        <li>Standardized z-scores for cross-study comparison</li>
                        <li>Compartment-level resolution (e.g., Glomerular vs Tubulointerstitial)</li>
                        <li>NaN preservation (50-80% missing is normal in LFQ)</li>
                        <li>UniProt ID mapping for protein standardization</li>
                        <li>Matrisome classification (Core ECM vs Associated)</li>
                        <li>Automatic backups on every update</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="section" id="datasets">
            <h2><span class="science-icon" data-number="6"></span>Available Datasets <span class="dataset-counter">(14)</span></h2>
            <table>
                <thead>
                    <tr>
                        <th scope="col">Study ID</th>
                        <th scope="col">Year</th>
                        <th scope="col">Tissue</th>
                        <th scope="col">Species</th>
                        <th scope="col">Compartments</th>
                        <th scope="col">Samples</th>
                    </tr>
                </thead>
                <tbody id="datasets-table-body">
                    <!-- Datasets will be loaded dynamically by about_tab.js -->
                </tbody>
            </table>
        </section>

        <section class="section" id="dashboard">
            <h2><span class="science-icon" data-number="7"></span>Dashboard Features</h2>
            <div class="structure-grid">
                <div class="structure-block">
                    <h3>Tab 1: Individual Dataset Analysis</h3>
                    <p>Explore single datasets in depth with compartment-specific visualizations. Select any dataset to view:</p>
                    <ul class="features-list">
                        <li>Heatmaps: Top aging-associated proteins ranked by z-score</li>
                        <li>Volcano plots: Statistical significance vs fold-change</li>
                        <li>Scatter plots: Young vs aged abundance patterns</li>
                        <li>Compartment filters: Drill down into specific tissue regions</li>
                        <li>Interactive tooltips: Protein details, gene symbols, statistical values</li>
                    </ul>
                    <div class="tip">
                        Use this tab to understand aging signatures within individual studies and validate findings from specific papers.
                    </div>
                </div>
                <div class="structure-block">
                    <h3>Tab 2: Compare Datasets</h3>
                    <p>Perform cross-study meta-analysis to identify universal aging markers. Features include:</p>
                    <ul class="features-list">
                        <li>Multi-dataset selection: Compare 2-13 studies simultaneously</li>
                        <li>Protein overlap analysis: Find proteins detected across multiple studies</li>
                        <li>Z-score distributions: Compare aging patterns across tissues/species</li>
                        <li>Consensus signatures: Identify proteins with consistent directional changes</li>
                        <li>Heterogeneity metrics: IÂ² statistics for cross-study variability</li>
                    </ul>
                    <div class="tip">
                        Use this tab to discover universal biomarkers (e.g., COL1A1 upregulated in 12/13 studies) and prioritize therapeutic targets.
                    </div>
                </div>
            </div>
        </section>

        <section class="section" id="contributing">
            <h2><span class="science-icon" data-number="8"></span>Contributing New Datasets</h2>
            <p>ECM-Atlas uses an autonomous agent to process and integrate new proteomic datasets automatically.</p>
            <h3>How to Add Your Dataset</h3>
            <ol>
            <li>Place your raw proteomic data (Excel/TSV) in <code>data_raw/Author et al. - Year/</code></li>
            <li>Run the autonomous agent:

                    <pre>python autonomous_agent.py "data_raw/Author et al. - Year/"</pre>
            </li>
            <li>The agent will:
                <ul>
                    <li>Identify data files and extract Study ID</li>
                    <li>Normalize to long format â†’ filter ECM proteins â†’ create wide format</li>
                    <li>Merge into unified database with z-score calculation</li>
                    <li>Create detailed logs (<code>agent_log.md</code>) for debugging</li>
                </ul>
            </li>
                <li>Submit a pull request to GitHub repository</li>
                <li>After approval, your dataset automatically appears in this dashboard!</li>
        </ol>
            <div class="tip">
                <strong>ðŸ“š Full Instructions:</strong><br>
                See <a href="#"><code>11_subagent_for_LFQ_ingestion/</code></a> for complete documentation, examples, and troubleshooting.
    </div>
        </section>

        <section class="section" id="principles">
            <h2><span class="science-icon" data-number="9"></span>Data Handling Principles</h2>
            <h3>Missing Values (NaN)</h3>
            <p>50-80% NaN is normal in LFQ proteomics and represents proteins not detected in a sample. We preserve NaN values and exclude them from statistics (<code>skipna=True</code>). Never impute or remove.</p>

            <h3>Zero Values â†’ NaN Conversion</h3>
            <p>All zeros are converted to NaN during processing. True zero abundance is biologically impossible in proteomics (instruments cannot measure absolute zero). Reported zeros are artifacts from imputation or background subtraction, so we transform them to NaN (missing values) using <code>.replace(0, np.nan)</code>.</p>

            <h3>Batch Correction Applied</h3>
            <p>neuroCombat harmonization with Age preservation has been successfully applied to correct systematic technical variation across 11 studies.</p>
            <ul>
                <li>ICC improved: 0.29 â†’ 0.507 (target: 0.50-0.60) âœ“</li>
                <li>Driver recovery: 100% (14/14 key collagens detected)</li>
                <li>FDR-significant proteins: 101 cross-study markers (q&lt;0.05)</li>
                <li>Z-score variance: 1.00 (target: 0.8-1.5) âœ“</li>
        </ul>
            <p><strong>Method:</strong> Global neuroCombat + tissue-level mean restoration + median imputation. <a href="#">Technical details</a></p>
        </section>

        <section class="section" id="architecture">
            <h2><span class="science-icon" data-number="10"></span>System Architecture</h2>
            <figure>
                <div class="mermaid">
graph TD
    A[ECM-Atlas Repository] --> B[Data Layer]
    A --> C[Processing Layer]
    A --> D[Output Layer]

    B --> B1[data_raw: 19 studies]
    B --> B2[pdf: 15 papers]
    B --> B3[05_papers_to_csv: Processed]

    C --> C1[Autonomous Agent]
    C --> C2[Merge Scripts]
    C --> C3[Z-score Functions]

    D --> D1[08_merged_ecm_dataset<br/>Unified Database]
    D --> D2[10_unified_dashboard_2_tabs<br/>This Dashboard]

    D1 --> E[merged_ecm_aging_zscore.csv<br/>3,715 measurements<br/>1,106 ECM proteins]
    D2 --> F[Interactive Visualizations]

    style A fill:#667eea,color:#fff
    style D1 fill:#4caf50,color:#fff
    style D2 fill:#2196f3,color:#fff
    style E fill:#ff9800,color:#fff
                </div>
                <figcaption>System Architecture Overview</figcaption>
            </figure>
        </section>

        <section class="section" id="links">
            <h2><span class="science-icon" data-number="11"></span>Links & Resources</h2>
            <div class="links">
                <div class="link-item" onclick="window.open('https://github.com/ecm-atlas/ecm-atlas', '_blank')">
                    <h4>GitHub Repository</h4>
                    <p>Source code, raw data, and documentation</p>
        </div>
                <div class="link-item" onclick="window.open('11_subagent_for_LFQ_ingestion/', '_blank')">
                    <h4>Agent Documentation</h4>
                    <p>How to add datasets using autonomous agent</p>
    </div>
                <div class="link-item" onclick="window.open('documentation/', '_blank')">
                    <h4>Scientific Documentation</h4>
                    <p>Theory, research insights, and methodology</p>
    </div>
                <div class="link-item" onclick="window.open('datasets/Randles_2021.html', '_blank')">
                    <h4>Example: Randles 2021</h4>
                    <p>See example of dataset detail page</p>
    </div>
            </div>
        </section>

        <section class="section" id="contributors">
            <h2><span class="science-icon" data-number="12"></span>Contributors</h2>
            <p>This project is developed and maintained by a team of researchers and developers passionate about ECM biology and aging research.</p>
            <div class="links">
                <div class="link-item" onclick="window.open('https://www.linkedin.com/in/raimbetov/', '_blank')">
                    <img src="static/assets/rakhan.png" alt="Rakhan Aimbetov" class="contributor-avatar">
                    <h4>Rakhan Aimbetov</h4>
                    <p>Data Scientist & Developer</p>
                </div>
                <div class="link-item" onclick="window.open('https://www.linkedin.com/in/danielkravtsov', '_blank')">
                    <img src="static/assets/daniel.png" alt="Daniel Kravtsov" class="contributor-avatar">
                    <h4>Daniel Kravtsov</h4>
                    <p>CEO & Founder of Improvado</p>
                    <small>daniel@improvado.io</small>
                </div>
            </div>
        </section>

        <section class="section" id="status">
            <h2><span class="science-icon" data-number="13"></span>Current Database Status</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number">14</span>
                    <span class="stat-label">Datasets</span>
            </div>
                <div class="stat-item">
                    <span class="stat-number">1,106</span>
                    <span class="stat-label">ECM Proteins</span>
        </div>
                <div class="stat-item">
                    <span class="stat-number">8</span>
                    <span class="stat-label">Organs</span>
    </div>
                <div class="stat-item">
                    <span class="stat-number">16</span>
                    <span class="stat-label">Compartments</span>
    </div>
</div>
        </section>
