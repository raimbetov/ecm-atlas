<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECM Atlas - Unified Analysis Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="static/styles.css">
    <script>
        window.API_BASE = (() => {
            const protocol = window.location.protocol;
            const hostname = window.location.hostname;
            const port = window.location.port;
            
            const baseUrl = `${protocol}//${hostname}${port ? ':' + port : ''}`;
            return baseUrl;
        })();
    </script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h1>ðŸ§¬ ECM Atlas - Unified Analysis Dashboard</h1>
                <div id="version-badge" style="background: rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600;">
                    v<span id="version-number">loading...</span>
                </div>
            </div>
            <p>Comprehensive analysis of extracellular matrix protein changes across aging tissues</p>
            <div class="stats-summary" id="global-stats">
                Loading...
            </div>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tab-navigation">
        <button class="tab-button active" data-tab="about">
            ðŸ“– About
        </button>
        <button class="tab-button" data-tab="individual">
            ðŸ”¬ Individual Dataset Analysis
        </button>
        <button class="tab-button" data-tab="compare">
            ðŸ“Š Compare Datasets
        </button>
    </nav>

    <!-- Tab Content: About -->
    <div id="tab-about" class="tab-content active">
        <div id="about-content">
            <!-- Content will be loaded dynamically -->
        </div>
    </div>

    <!-- Tab Content: Individual Dataset Analysis -->
    <div id="tab-individual" class="tab-content">
        <div class="dataset-selector">
            <label for="dataset-select">
                <strong>Select Dataset:</strong>
            </label>
            <select id="dataset-select">
                <option value="">Loading datasets...</option>
            </select>
            <div id="dataset-info" class="dataset-info"></div>
        </div>

        <div id="individual-content">
            <!-- Content loaded by individual_dataset.js -->
        </div>
    </div>

    <!-- Tab Content: Compare Datasets -->
    <div id="tab-compare" class="tab-content">
        <div id="compare-content">
            <!-- Content loaded by compare_datasets.js -->
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>Loading data...</p>
    </div>

    <!-- Scripts (with cache-busting version param) -->
    <script src="static/about_tab.js?v=20251018-1"></script>
    <script src="static/main.js?v=20251015-1"></script>
    <script src="static/individual_dataset.js?v=20251015-3"></script>
    <script src="static/compare_datasets.js?v=20251018-FIX4"></script>
</body>
</html>
